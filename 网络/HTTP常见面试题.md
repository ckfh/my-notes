# HTTP常见面试题

## 基本知识

HTTP 是⼀个在计算机世界⾥专⻔在「两点」之间「传输」⽂字、图⽚、⾳频、视频等「超⽂本」数据的「约定和规范」。

常见状态码：

- 1XX：属于**提示信息**，是协议处理中的一种中间状态，实际用到较少；
- 2XX：服务器**成功**处理了客户端请求；
    - 200 OK
    - 204 No Content
    - 206 Partial Content
- 3XX：表示客户端请求的资源发生了变动，需要用新的URL重新发送请求获取资源，也就是**重定向**；
    - 301 Moved Permanently
    - 302 Found
    - 304 Not Modified
- 4XX：**客户端错误**，请求报文有误，服务器无法处理。
    - 400 Bad Request
    - 403 Forbidden
    - 404 Not Found
- 5XX：**服务器错误**，服务器在处理请求时内部发生了错误。
    - 500 Internal Server Error
    - 501 Not Implemented
    - 502 Bad Gateway
    - 503 Service Unavailable

常见字段：

- host
- content-length
- connection
- content-type
- content-encoding

## GET与POST

GET是获取资源，POST是提交资源。

- 安全：不会破坏服务器上的资源。
- 幂等，多次执行相同操作，结果都是相同的。

GET方法是安全且幂等的，POST方法既不安全也不幂等。

## 特性

优点：

1. 简单，header+body，key-value，易于理解。
2. 灵活和易于拓展，HTTP的各类请求方法，URI/URL，状态码，头字段等每个组成要求**都没被固定死**。
3. 应用广泛和跨平台。

缺点：

1. 无状态
2. 明文传输
3. 不安全
    - 通信用明文
    - 不验证对方身份
    - 无法证明报文完整性

性能：

1. 长连接
2. 管道网络传输
    - 客户端可以发起多个请求，只要第一个请求发送出去，不必等待其响应就可以发送第二个请求。
3. 队头阻塞
    - 服务端必须按照顺序，先响应第一个请求再响应第二个请求。
    - 如果第一个请求的响应处理特别慢，就导致第二个请求的响应也被延后。

## HTTP和HTTPS

1. HTTPS在TCP和HTTP之间加入SSL/TLS协议，能够加密传输报文；
2. HTTPS在TCP三次握手之后还需要进行SSL/TLS的握手过程，才能进入加密报文传输；
3. HTTP端口80，HTTPS端口443；
4. HTTPS需要向CA申请数字证书，来保障服务器身份是可信的。

HTTP的不安全性如何被HTTPS解决：

- 通信用明文(混合加密，虽然依旧可以被抓包获取，但是无法理解内容)
- 不验证对方身份(数字证书)
- 无法证明报文是否被篡改(摘要算法)

## HTTP1.1/2/3演变

HTTP1.1改进：

- 长连接
- 管道传输

瓶颈：

- 头部未经压缩，信息越多延迟越大，只能压缩body部分；
- 头部冗余；
- 服务器返回响应会出现”队头阻塞“；
- 请求没有优先级控制；
- 请求只能从客户端发起，服务端只能被动响应。

HTTP2改进：

- 头部压缩
- 二进制帧
- 数据流
- 多路复用
- 服务器推送

瓶颈：

本质在于长连接属于多个HTTP请求复用一个TCP连接，下次的TCP协议是不知道有多少个HTTP请求的。

所以，一旦TCP发生了丢包现象，会触发TCP的重传机制，这样在一个TCP连接中的**所有HTTP请求都必须等待丢了的包被重传回来**。

HTTP3改进：

- 把TCP协议替换成了UDP，在上层实现可靠传输。
