# 笔记

## warning

1. `rm -rf`之前先备份数据！
2. 输入确认命令前仔细查看上方的提示。

## 查看近期修改的文件

```shell
# 查看24小时内修改过的文件
find . -name '*.txt' -mtime 0
# 查看24-48小时内修改过的文件
find . -name '*.txt' -mtime 1
```

## TOP命令详解

`load average: 9.59, 4.75, 1.92`，后面的三个参数分别表示1分钟、5分钟、15分钟的系统负载情况。

`Tasks: 145 total,   2 running, 143 sleeping,   0 stopped,   0 zombie`，共145个进程，2个运行进程，143个睡眠进程，0个中止进程，0个冻结进程。

冻结进程指的是那些已经运行完毕但是仍保有进程条目的进程。

`Cpu(s): 99.8%us,  0.1%sy,  0.0%ni,  0.2%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st`

- 用户空间占用CPU百分比；
- 内核空间占用CPU百分比；
- 用户进程空间内改变过优先级的进程占用CPU百分比；
- 空闲CPU百分比;
- 等待输入输出的CPU时间百分比;
- 处理硬中断所花费的时间百分比；
- 处理软中断所花费的时间百分比；
- 运行虚拟机而损失的时间百分比(st：steal，窃取时间)

`MiB Mem:   3906.9 total,  1821.0 free,  1040.8 used,   1045.1 buff/cache`

- 物理内存总量；
- 空闲内存总量；
- 使用的物理内存总量；
- 用作内核缓存的内存总量；

`MiB Swap:   1162.4 total,  1162.4 free,  0.0 used,   2619.8 avail Mem`

- (avail Mem)可用的交换区内存总量。

Linux内核为了提高读写效率与速度，会将文件在内存中进行缓存，这部分内存就是Cache Memory(缓存内存)。即使你的程序运行结束后，Cache Memory也不会自动释放。这就会导致你在Linux系统中程序频繁读写文件后，你会发现可用物理内存变少。当系统的物理内存不够用的时候，就需要将物理内存中的一部分空间释放出来，以供当前运行的程序使用。那些被释放的空间可能来自一些很长时间没有什么操作的程序，这些被释放的空间被临时保存到Swap空间中，等到那些程序要运行时，再从Swap分区中恢复保存的数据到内存中。这样，系统总是在物理内存不够时，才进行Swap交换。

`PR`：进程优先级。

`NI`：NICE值，正值表示低优先级，负值表示高优先级。

`VIRT`：进程使用的虚拟内存总量。

`RES`：进程使用的、未被换出的物理内存大小。

`SHR`：共享内存大小。

`S`：进程状态。D=不可中断的睡眠状态、R=运行、S=睡眠、T=跟踪/停止、Z=僵尸进程、I=闲置的。

`%CPU`：上次更新到现在的CPU时间占用百分比。

`%MEM`：进程使用的物理内存百分比。

`TIME+`：进程使用的CPU时间总计。

`COMMAND`：进程名称。

## 查看端口占用

root权限下使用`lsof -i:端口号`来查看端口的占用情况。

或使用`netstat -tunlp | grep 端口号`显示TCP、UDP的端口和进程等相关情况。

-t，仅显示TCP相关选项；-u，仅显示UDP相关选项；-n，拒绝显示别名，能显示数字的全部转化为数字；-l，仅列出在监听的服务状态；-p，显示建立相关链接的程序名。

## tail命令

```shell
# 查看最后10行内容
tail filename
# 滚动查看文件内容
tail -f filename
# 从第20行至末尾
tail -n +20 filename
# 最后10个字符内容
tail -c 10 filename
```
