# 笔记

## 依赖倒置的思考

场景：

- 模块A功能：根据页面的域名，分组统计各个域名所拥有的条目。
- 模块B功能：获取页面信息，生成文本返回。

模块A调用模块B的功能，获取到页面文本，分析文本统计输出各个域名的条目。

在这之中我们发现，模块A是直接依赖于模块B的，如果将来模块B的功能发生变动，则有可能牵扯到模块A的功能变动。

比如说模块B是获取互联网指定页面，此时我们将模块A和模块B部署在一个内网环境下，运行测试，会发现测试失败。

如果说在不改变模块B功能的前提下（因为我们肯定也需要在外网环境下使用），此时由于模块A的调用失败，我们就应该意识到上述模块A直接调用模块B的功能所产生的依赖导致了这样的结果。

一个合理的解决方案：对模块B的功能进行抽象，抽离出一个中间抽象层，模块A依赖于该抽象层，因此当在非外网环境时，我们就可以增加一个模块C也实现该中间抽象层的功能，它负责提供一个静态页面文件，在内网环境下我们就可以将模块A的这部分有关“获取指定页面文本”的逻辑替换成模块C，就能够顺利调用模块A并完成测试。

综上，有关依赖倒置原则的运用就在于”只有对代码中那些现在或未来会发生变化的东西进行抽象，才能获得最大的收益。“，它解耦了高层模块和低层模块间的依赖关系，让代码变得更灵活。
